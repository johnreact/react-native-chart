{"version":3,"names":["React","useEffect","useRef","useMemo","useState","Fragment","Text","View","Animated","StyleSheet","Easing","Dimensions","Platform","Svg","Path","SvgXml","Square","Arc","ViewBox","sum","LinearInterpolation","AnimatedPath","createAnimatedComponent","DonutChart","data","containerWidth","containerHeight","radius","startAngle","endAngle","strokeWidth","type","animationType","unit","typeLabel","labelWrapperStyle","labelValueStyle","labelTitleStyle","containerStyle","styleName","styleValue","icon","switchSvg","animatedRight","disableAnimation","valueShow","donutItemListeners","viewBox","width","height","squareInCircle","diameter","animateOpacity","Value","current","animateContainerOpacity","animatedStrokeWidths","map","pathRefs","animatedPaths","displayValue","setDisplayValue","rotationPaths","setRotationPath","defaultInterpolateConfig","inputRange","outputRange","sumOfDonutItemValue","d","value","reduce","total","prev","donutItemValueToPercentage","rotationRange","length","forEach","_","idx","fromValues","slice","toValues","start","end","from","to","unshift","push","i","setValue","slideAnimation","fadeAnimation","animationInProgress","stepAnimated","setStepAnimated","animations","timing","toValue","duration","easing","bezier","useNativeDriver","parallel","ani","startAnimation","index","setTimeout","element","addListener","animatedValue","startValue","removeAllListeners","_donutItemListeners$i","_donutItemListeners$i2","call","angle","arcParams","coordX","getCenterCoord","x","coordY","y","drawPath","getDrawPath","setNativeProps","onUpdateDisplayValue","onPressIn","onPressOut","_getContainerStyle","styles","defaultContainer","_getLabelValueStyle","color","defaultLabelValue","_getLabelTitleStyle","defaultLabelTitle","_getLabelWrapperStyle","defaultLabelWrapper","defaultLabelSemiCircular","getCorner","opacity","_getLabelWrapperIconStyle","defaultLabelIcon","OS","borderRadius","backgroundColor","renderSvg","createElement","key","ref","el","onPress","strokeLinecap","fill","stroke","style","xml","name","create","display","justifyContent","alignItems","position","paddingTop","get","fontSize","fontWeight"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useMemo, useState, Fragment } from \"react\";\nimport {\n  StyleProp,\n  Text,\n  View,\n  ViewStyle,\n  Animated,\n  StyleSheet,\n  TextStyle,\n  Easing,\n  Dimensions,\n  Platform,\n} from \"react-native\";\n\nimport { Svg, Path, SvgXml } from \"react-native-svg\";\nimport { Square } from \"./packages/shape\";\nimport { Arc, ArcParams, ViewBox } from \"./packages/svg\";\nimport { sum } from \"./packages/array\";\nimport { LinearInterpolation } from \"./packages/math\";\n\nexport type DonutItem = {\n  name: string;\n  value: number;\n  color: string;\n};\n\nexport type DonutAnimationType = \"fade\" | \"slide\";\n\nexport type DonutAnimationTypeLabel = 'circular' | 'semi-circular';\n\nexport type IDonutProps = {\n  data: DonutItem[];\n  containerWidth: number;\n  containerHeight: number;\n  radius: number;\n  startAngle?: number;\n  endAngle?: number;\n  strokeWidth?: number;\n  type?: \"butt\" | \"round\" | \"square\";\n  typeLabel?: any;\n  labelValueStyle?: StyleProp<TextStyle>;\n  labelTitleStyle?: StyleProp<TextStyle>;\n  labelWrapperStyle?: StyleProp<ViewStyle>;\n  containerStyle?: StyleProp<ViewStyle>;\n  animationType?: DonutAnimationType;\n  unit?: string;\n  styleName?: TextStyle,\n  styleValue?: TextStyle\n  icon?: string\n  switchSvg?: boolean\n  animatedRight?: boolean\n  disableAnimation?: boolean,\n  valueShow?: any\n};\n\nconst AnimatedPath = Animated.createAnimatedComponent(Path);\n\nexport const DonutChart = ({\n  data,\n  containerWidth,\n  containerHeight,\n  radius,\n  startAngle = -125,\n  endAngle = startAngle * -1,\n  strokeWidth = 10,\n  type = \"round\",\n  animationType = \"slide\",\n  unit,\n  typeLabel = \"circular\",\n  labelWrapperStyle,\n  labelValueStyle,\n  labelTitleStyle,\n  containerStyle,\n  styleName,\n  styleValue,\n  icon = '',\n  switchSvg = false,\n  animatedRight,\n  disableAnimation = true,\n  valueShow\n}: IDonutProps) => {\n  let donutItemListeners: any = [];\n  const viewBox = new ViewBox({\n    width: containerWidth,\n    height: containerHeight,\n  });\n  const squareInCircle = new Square({ diameter: radius * 2 });\n\n  const animateOpacity = useRef(new Animated.Value(0)).current;\n  const animateContainerOpacity = useRef(new Animated.Value(0)).current;\n  const animatedStrokeWidths = useRef(\n    data.map(() => new Animated.Value(strokeWidth))\n  ).current;\n  const pathRefs = useRef<typeof AnimatedPath[]>([]);\n  const animatedPaths = useRef<Array<Animated.Value>>([]).current;\n\n\n  \n\n  const [displayValue, setDisplayValue] = useState<DonutItem>(switchSvg ? data[1] : data[0]);\n\n  // TODO:\n  // remove WTF is this variable ?\n  const [rotationPaths, setRotationPath] = useState<\n    Array<{ from: number; to: number }>\n  >([]);\n\n  const defaultInterpolateConfig = (): {\n    inputRange: [number, number];\n    outputRange: [number, number];\n  } => ({ inputRange: [0, 100], outputRange: [startAngle, endAngle] });\n\n  const sumOfDonutItemValue = useMemo(\n    (): number =>\n      data\n        .map((d) => d.value)\n        .reduce((total: number, prev: number) => total + prev),\n    [data]\n  );\n\n  const donutItemValueToPercentage = useMemo(\n    () => data.map((d) => (d.value / sumOfDonutItemValue) * 100),\n    [sumOfDonutItemValue, data]\n  );\n\n  useMemo(() => {\n    const rotationRange: Array<{ from: number; to: number }> = [];\n\n    if (switchSvg) {\n      animatedPaths.length = 0;\n  \n      data.forEach((_, idx) => {\n        const fromValues = sum(donutItemValueToPercentage.slice(0, idx));\n        const toValues = sum(donutItemValueToPercentage.slice(0, idx + 1))\n    \n        const start = LinearInterpolation({\n          value: fromValues,\n          ...defaultInterpolateConfig(),\n        });\n    \n        const end = LinearInterpolation({\n          value: toValues,\n          ...defaultInterpolateConfig(),\n        });\n    \n        rotationRange[idx] = { from: start, to: end };\n    \n        animatedPaths.unshift(new Animated.Value(start));\n      });\n      setRotationPath(rotationRange);\n    } else {\n    data.forEach((_, idx) => {\n      const fromValues = sum(donutItemValueToPercentage.slice(0, idx));\n      const toValues = sum(donutItemValueToPercentage.slice(0, idx + 1));\n\n      animatedPaths.push(\n        new Animated.Value(\n          LinearInterpolation({\n            value: fromValues,\n            ...defaultInterpolateConfig(),\n          })\n        )\n      );\n\n      rotationRange[idx] = {\n        from: LinearInterpolation({\n          value: fromValues,\n          ...defaultInterpolateConfig(),\n        }),\n        to: LinearInterpolation({\n          value: toValues,\n          ...defaultInterpolateConfig(),\n        }),\n      };\n    });\n    setRotationPath(rotationRange);\n    }\n\n   \n  }, [data]);\n\n  useEffect(() => {\n    if (disableAnimation === true) {\n      // Không chạy animation, hiển thị ngay trạng thái cuối cùng\n      rotationPaths.forEach((d, i) => {\n        animatedPaths[i].setValue(d.to); // Đặt giá trị trực tiếp mà không cần animate\n      });\n    } else {\n      switch (animationType) {\n        case \"slide\":\n          animateContainerOpacity.setValue(1);\n          slideAnimation();\n          break;\n\n        default:\n          fadeAnimation();\n          break;\n      }\n    }\n  }, [disableAnimation, data]);\n\n  useEffect(() => {\n    switch (animationType) {\n      case \"slide\":\n        animateContainerOpacity.setValue(1);\n        slideAnimation();\n        break;\n\n      default:\n        fadeAnimation();\n        break;\n    }\n  }, []);\n\n  let animationInProgress = false;\n\n  const [stepAnimated, setStepAnimated] = useState(1)\n\n  const slideAnimation = () => {\n    if (disableAnimation || animationInProgress) return;\n    if (switchSvg) {\n      const animations: Animated.CompositeAnimation[] = rotationPaths.map((d, i) => {\n        return Animated.timing(animatedPaths[i], {\n          toValue: d.to,\n          duration: 3000,\n          easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n          useNativeDriver: true,\n        });\n      });\n    \n      Animated.parallel(animations).start();\n    } else {\n        const animations: Animated.CompositeAnimation[] = data.map((_, i) => {\n      const ani = Animated.timing(animatedPaths[i], {\n        toValue: rotationPaths[i].to,\n        duration: 3000,\n        easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n        useNativeDriver: true,\n      });\n\n      return ani;\n    });\n    Animated.parallel(animations).start();\n    }\n\n    animationInProgress = true;\n\n    const startAnimation = (index: number) => {\n\n    if (index >= animatedPaths.length || index > stepAnimated) {\n      animationInProgress = false; // Reset when all animations are done\n      return;\n    }\n\n    setTimeout(() => {\n      setStepAnimated(index);\n    }, 25);\n\n\n      Animated.timing(animatedPaths[index], {\n        toValue: rotationPaths[index].to,\n        duration: 2000,\n        easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n        useNativeDriver: true,\n      }).start(() => {\n        startAnimation(index + 1);\n       \n      });\n  };\n    startAnimation(0);\n    setStepAnimated(0)\n  };\n\n  const fadeAnimation = () => {\n    Animated.timing(animateContainerOpacity, {\n      toValue: 1,\n      duration: 2500,\n      easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n      useNativeDriver: true,\n    }).start();\n  };\n\n  useEffect(() => {\n    data.forEach((_, i) => {\n      const element = pathRefs.current[animatedRight ? 1 : i];\n      donutItemListeners[i] = addListener({\n        element,\n        animatedValue: animatedPaths[animatedRight ? 1 : i],\n        startValue: rotationPaths[animatedRight ? 1 : i].from,\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (animationType === \"slide\") {\n        data.forEach((_, i) => {\n          if (\n            donutItemListeners?.[i] &&\n            donutItemListeners?.[i].removeAllListeners\n          ) {\n            donutItemListeners?.[i].removeAllListeners?.();\n          }\n        });\n      }\n    };\n  }, []);\n\n  const addListener = ({\n    element,\n    animatedValue,\n    startValue,\n  }: {\n    element: any;\n    animatedValue: Animated.Value;\n    startValue: number;\n  }) => {\n    animatedValue.addListener((angle) => {\n      const arcParams: ArcParams = {\n        coordX: viewBox.getCenterCoord().x,\n        coordY: viewBox.getCenterCoord().y,\n        radius: radius,\n        startAngle: startValue,\n        endAngle: angle.value,\n      };\n      const drawPath = new Arc(arcParams).getDrawPath();\n\n      if (element) {\n        element.setNativeProps({ d: drawPath });\n      }\n    });\n  };\n\n  useEffect(() => {\n    animateOpacity.setValue(0);\n    Animated.timing(animateOpacity, {\n      toValue: 1,\n      duration: 500,\n      easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n      useNativeDriver: true,\n    }).start();\n  }, []);\n\n  const onUpdateDisplayValue = (value: DonutItem, index: number) => {\n    setDisplayValue(value);\n    animateOpacity.setValue(0);\n\n    Animated.parallel([\n      Animated.timing(animateOpacity, {\n        toValue: 1,\n        duration: 500,\n        useNativeDriver: true,\n      }),\n    ]).start();\n  };\n\n  const onPressIn = (value: DonutItem, index: number) => {\n    Animated.timing(animatedStrokeWidths[index], {\n      toValue: strokeWidth + 2,\n      duration: 500,\n      useNativeDriver: true,\n      easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n    }).start();\n  };\n\n  const onPressOut = (index: number) => {\n    Animated.timing(animatedStrokeWidths[index], {\n      toValue: strokeWidth,\n      duration: 500,\n      useNativeDriver: true,\n      easing: Easing.bezier(0.075, 0.82, 0.165, 1),\n    }).start();\n  };\n\n  const _getContainerStyle = (): StyleProp<ViewStyle> => [\n    styles.defaultContainer,\n    containerStyle,\n    { width: containerWidth, height: containerHeight },\n  ];\n\n  const _getLabelValueStyle = (color: string): StyleProp<TextStyle> => [\n    styles.defaultLabelValue,\n    { color },\n    labelValueStyle,\n  ];\n\n  const _getLabelTitleStyle = (color: string): StyleProp<TextStyle> => [\n    styles.defaultLabelTitle,\n    { color },\n    labelTitleStyle,\n  ];\n\n  const _getLabelWrapperStyle = (): Animated.WithAnimatedArray<any> => [\n    typeLabel === 'circular' ? styles.defaultLabelWrapper : styles.defaultLabelSemiCircular , \n    {\n      width: squareInCircle.getCorner() - strokeWidth,\n      height: squareInCircle.getCorner() - strokeWidth,\n      opacity: animateOpacity,\n    },\n    labelWrapperStyle,\n  ];\n\n  const _getLabelWrapperIconStyle = (): Animated.WithAnimatedArray<any> => [\n styles.defaultLabelIcon , \n    {\n      width:  radius * (Platform.OS ==='android' ? 1.5 : 1.55),\n      height: radius * (Platform.OS ==='android' ? 1.5 : 1.55),\n      borderRadius: 120,\n      backgroundColor: '#F4F8FC',\n      opacity: animateOpacity,\n    },\n    labelWrapperStyle,\n  ];\n\n  const renderSvg = useMemo(() => {\n    return (\n      <Svg width={viewBox.width} height={viewBox.height}>\n        {rotationPaths.map((d, i) => {\n          const arcParams: ArcParams = {\n            coordX: viewBox.getCenterCoord().x,\n            coordY: viewBox.getCenterCoord().y,\n            radius: radius,\n            startAngle: d.from,\n            endAngle: d.to,\n          };\n          const drawPath = new Arc(arcParams).getDrawPath();\n\n          return (\n            <AnimatedPath\n              key={`item-${i}`}\n              ref={(el: any) => (pathRefs.current[i] = el)}\n              onPress={() => onUpdateDisplayValue(data[i], i)}\n              onPressIn={() => onPressIn(data[i], i)}\n              onPressOut={() => onPressOut(i)}\n              strokeLinecap={type}\n              d={drawPath}\n              opacity={animateContainerOpacity}\n              fill=\"none\"\n              stroke={ stepAnimated < i && !disableAnimation ?  'white' : data[i].color}\n              strokeWidth={animatedStrokeWidths[i]}\n            />\n          );\n        })}\n      </Svg>\n    )\n  }, [rotationPaths, viewBox, stepAnimated, pathRefs.current, animateContainerOpacity, animatedStrokeWidths])\n  \n\n  return (\n    <Fragment>\n      <View style={_getContainerStyle()}>\n      {renderSvg}\n        {\n          icon !== '' ? \n          <Animated.View style={_getLabelWrapperIconStyle()}>\n          <SvgXml xml={icon} />\n          </Animated.View>\n          :\n        <Animated.View style={_getLabelWrapperStyle()}>\n          <Text style={[_getLabelTitleStyle(displayValue?.color), {...styleName}]}>\n            {displayValue?.name}\n          </Text>\n          <Text style={[_getLabelValueStyle(displayValue?.color), {...styleValue}]}>\n            {valueShow.value} {unit}\n          </Text>\n        </Animated.View>\n        }\n      </View>\n    </Fragment>\n  );\n};\nconst styles = StyleSheet.create({\n  defaultContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n\n  defaultLabelWrapper: {\n    position: \"absolute\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n\n  defaultLabelSemiCircular: {\n    position: \"absolute\",\n    alignItems: \"center\",\n    justifyContent: 'flex-start',\n    paddingTop: Dimensions.get('window').width * 0.06\n  },\n\n  defaultLabelIcon: {\n    position: \"absolute\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n\n  },\n\n  defaultLabelValue: {\n    fontSize: 32,\n    fontWeight: \"bold\",\n  },\n\n  defaultLabelTitle: {\n    fontSize: 16,\n  },\n});\n"],"mappings":"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","ignoreList":[]}